---
- hosts: tests
  become: yes
  gather_facts: no
  remote_user: vagrant
  vars:
    - ansible_python_interpreter: /usr/bin/python3
  roles:
    # Setup production 
    - role: hamlet
      vars:
        hamlet: {
          project: {
            dir: "/srv/sites/hamlet_demoapp/production",
            name: "hamlet_test",
            env: "production.env"
          },
          git: {
            repo: "https://github.com/jaketreacher/hamlet_demoapp.git",
            branch: production
          },
          db: {
            name: hamlet-prod,
            user: hamlet,
            pass: password
          },
          daemon_name: hamlet_test.prod,
          server_name: hamlet-test
        }
    # Setup staging
    - role: hamlet
      vars:
        hamlet: {
          project: {
            dir: "/srv/sites/hamlet_demoapp/staging",
            name: "hamlet_test",
            env: "staging.env"
          },
          git: {
            repo: "https://github.com/jaketreacher/hamlet_demoapp.git",
            branch: staging
          },
          daemon_name: hamlet_test.stag,
          server_name: staging.hamlet-test
        }
